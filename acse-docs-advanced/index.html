<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ACSE: ACSE: Advanced Compiler System for Education</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ACSE<span id="projectnumber">&#160;2.0.1</span>
   </div>
   <div id="projectbrief">Advanced Compiler System for Education</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('index.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">ACSE: Advanced Compiler System for Education </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__2_users_2danielecattaneo_2_documents_2_poli_2_didattica_2_f_l_c_2teaching__materials_2acse_2_r_e_a_d_m_e"></a> </p>
<h2><a class="anchor" id="autotoc_md1"></a>
<a href="https://github.com/polimi-flc/acse/releases">Downloads and quick reference</a></h2>
<h2><a class="anchor" id="autotoc_md2"></a>
<a href="https://polimi-flc.github.io/acse-docs/index.html">Documentation</a></h2>
<p>ACSE is a complete toolchain consisting of a compiler (<code>acse</code> itself), an assembler (<code>asrv32im</code>), and a simulator (<code>simrv32im</code>), developed for education on the topic of compilers in the "Formal Languages and Compilers" course at <a href="https://www.polimi.it">Politecnico di Milano</a>.</p>
<p>ACSE, together with its supporting tools, aims to provide a simple but reasonably accurate sandbox for learning how a compilation toolchain works. It is based on the standard <a href="https://riscv.org">RISC-V</a> specification: specifically, ACSE emits RV32IM assembly code files that are also compatible with the GNU toolchain and <a href="https://github.com/TheThirdOne/rars">RARS</a>.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
The LANCE language</h1>
<p>The language accepted by ACSE is called LANCE (Language for Compiler Education), and is an extremely simplified subset of C. More in detail:</p>
<ul>
<li>Variable declarations must be global</li>
<li>Variable initialization cannot be performed at declaration time.</li>
<li>No support for functions, code is allowed in global scope</li>
<li>Only two types are supported, <code>int</code> and <code>int[]</code> (fixed size array of <code>int</code>).</li>
<li>Compound operation/assignment operators are missing (<code>+=</code>, <code>++</code>, ...)</li>
<li>The assignment operator is not an expression operator (assignments are kinds of statements)</li>
<li>Reduced set of control flow statements (<code>while</code>, <code>do-while</code>, <code>if</code>), no <code>break</code> and <code>continue</code>.</li>
<li>In control statements, all code blocks must be enclosed in braces</li>
<li>Only two (builtin) I/O primitives: <code>read</code> and <code>write</code> which read and write integers from standard input and output respectively.</li>
</ul>
<p>Here is an example LANCE program which computes the first 10 Fibonacci numbers by storing them in an array, and then prints them out:</p>
<div class="fragment"><div class="line">int v[10], i;</div>
<div class="line"> </div>
<div class="line">v[0] = 0;</div>
<div class="line">v[1] = 1;</div>
<div class="line">i = 2;</div>
<div class="line">while (i &lt; 10) {</div>
<div class="line">  v[i] = v[i-1] + v[i-2];</div>
<div class="line">  i = i + 1;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">i = 0;</div>
<div class="line">while (i &lt; 10) {</div>
<div class="line">  write(v[i]);</div>
<div class="line">  i = i + 1;</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md4"></a>
How to use ACSE</h1>
<p>ACSE is written in C99 and is supported on the following operating systems:</p>
<ul>
<li><b>Linux</b> (any recent 32 bit or 64 bit distribution should work)</li>
<li><b>macOS</b> (any recent version should work)</li>
<li><b>Windows</b> (both 32 bit or 64 bit) when built with <a href="http://www.mingw.org">MinGW</a> under <a href="https://www.msys2.org">MSYS2</a>, or inside <b>Windows Services for Linux</b> (WSL).</li>
</ul>
<p>If you are using <b>Linux</b> or <b>macOS</b>, ACSE requires the following programs to be installed:</p>
<ul>
<li>a <b>C compiler</b> (for example <em>GCC</em> or <em>clang</em>)</li>
<li><b>GNU bison</b></li>
<li><b>GNU flex</b></li>
</ul>
<p>If you use <b>Windows</b>, first you must install either the <a href="https://www.msys2.org">MSYS2</a> environment or <b>Windows Services for Linux</b> (WSL). Both MSYS2 and Windows Services for Linux (WSL) provide a Linux-like environment inside of Windows.</p>
<p>Once you have installed either MSYS2 or WSL, you can use the following instructions just as if you were using Linux or macOS.</p>
<h2><a class="anchor" id="autotoc_md5"></a>
Building ACSE</h2>
<p>To build the ACSE compiler toolchain, open a terminal and type: </p><pre class="fragment">  make
</pre><p> The built executables will be located in the <code>bin</code> directory.</p>
<h2><a class="anchor" id="autotoc_md6"></a>
Testing ACSE</h2>
<p>To compile some examples (located in the directory <code>tests</code>) type: </p><pre class="fragment">  make tests
</pre> <h2><a class="anchor" id="autotoc_md7"></a>
Running ACSE</h2>
<p>You can compile and run new Lance programs in this way (suppose you have saved a Lance program in <code>myprog.src</code>): </p><pre class="fragment">  ./bin/acse myprog.src -o myprog.asm
  ./bin/asrv32im myprog.asm -o myprog.o
  ./bin/simrv32im myprog.o
</pre><p> Alternatively, you can add a test to the <code>tests</code> directory by following these steps:</p>
<ol type="1">
<li>Create a new directory inside <code>tests</code>. You can choose whatever directory name you wish, as long as it is not <code>test</code>.</li>
<li>Move the source code files to be compiled inside the directory you have created. The extension of these files <b>must</b> be <code>.src</code>.</li>
<li>Run the command <code>make tests</code> to compile all tests, included the one you have just added.</li>
</ol>
<p>The <code>make tests</code> command only runs the ACSE compiler and the assembler, you will have to invoke the simulator manually.</p>
<p>All assembly files produced by ACSE are compatible with <a href="https://github.com/TheThirdOne/rars">RARS</a> so you can also run any compiled program through it.</p>
<h1><a class="anchor" id="autotoc_md8"></a>
Internals of ACSE</h1>
<h2><a class="anchor" id="autotoc_md9"></a>
Naming conventions and code style</h2>
<p>All symbols are in lower camel case, and all functions that operate on a structure have a prefix that depends on the structure. Additional prefixes are used for special purposes:</p>
<ul>
<li>Functions that allocate and initialize a structure are prefixed "new".</li>
<li>Functions that initialize a structure allocated externally are prefixed "init".</li>
<li>Functions that allocate and initialize a structure, and then add it to a parent object, are prefixed "create".</li>
<li>Functions that deinitialize and deallocate a structure are prefixed "delete".</li>
<li>Functions that deinitialize a structure without deallocating it are prefixed "deinit".</li>
</ul>
<p>Additional rules are used for ACSE alone:</p>
<ul>
<li>Functions that modify a <a class="el" href="group__program.html#structt__program">t_program</a> structure may have no specific prefix.</li>
<li>Functions that add instructions to a <a class="el" href="group__program.html#structt__program">t_program</a> are prefixed "gen".</li>
</ul>
<p>All source code files use 2 spaces for alignment and indentation.</p>
<h2><a class="anchor" id="autotoc_md10"></a>
The compilation process</h2>
<p>In ACSE, the lexer and parser defined in <a class="el" href="scanner_8l.html" title="The Flex file describing the tokens used by the LANCE language.">scanner.l</a> and <a class="el" href="parser_8y.html">parser.y</a> are generated by Flex and Bison respectively. The semantic actions in the parser also take care of initial code generation &ndash; which makes ACSE a syntax-driven translator.</p>
<p>The current state of the compilation process is stored in an object of type <a class="el" href="group__program.html#structt__program">t_program</a>. This object contains the current intermediate representation, consisting of the instruction list and the symbol table. The intermediate representation is manipulated by the semantic actions by using the functions defined in <a class="el" href="program_8h.html" title="Program object definition and management.">program.h</a> and <a class="el" href="codegen_8h.html" title="Code generation functions.">codegen.h</a>, and is in a symbolic and simplified form of RISC-V assembly code. Specifically, the function prefixed with <code>gen</code> add new instructions at the end of the instruction list, and the functions <a class="el" href="group__program.html#ga81ddaf4f1b78493fbe28bc22776e21ff">createLabel()</a> and <a class="el" href="group__program.html#ga2d4ec96f4ec3f6ae749fad8b7ce1f100">assignLabel()</a> allow for the creation and placement of labels. The ACSE IR provides infinite temporary registers, and new (unused) registers can be retrieved by calling <a class="el" href="group__program.html#ga52729b78b6743bfb29abff7e448999da">getNewRegister()</a>.</p>
<p>After the generation of the initial IR by the frontend, the IR is normalized by translating system function calls to lower level code, and other pseudo-instructions not defined by the RISC-V standard are translated to legal equivalent instruction sequences. Then, each temporary register is allocated to a physical machine register, spilling values to memory if the number of physical registers is not sufficient. Finally, the instructions of the program are written to the assembly-language output file specified by the command line arguments.</p>
<h1><a class="anchor" id="autotoc_md11"></a>
Authors</h1>
<p>ACSE is copyright (c) 2008-2024 Politecnico di Milano, and is licensed as GNU GPL version 3. It has been developed by the following contributors:</p>
<ul>
<li>Andrea di Biagio (main author of the original non-RISC-V version)</li>
<li>Giovanni Agosta (wrote the simulator in the original non-RISC-V version, advisor to the RISC-V version)</li>
<li>Niccolò Izzo (maintainer 2015-2020)</li>
<li>Daniele Cattaneo (maintainer from 2019, main author of the RISC-V version)</li>
</ul>
<p>Additional help and input has been provided by:</p>
<ul>
<li>Alessandro Barenghi</li>
<li>Marcello Bersani</li>
<li>Luca Breveglieri</li>
<li>Stefano Cherubin</li>
<li>Massimo Fioravanti</li>
<li>Gabriele Magnani</li>
<li>Angelo Morzenti</li>
<li>Michele Scandale</li>
<li>Michele Scuttari</li>
<li>Ettore Speziale</li>
<li>Michele Tartara</li>
</ul>
<p>Please report any suspected bugs or defects to <code>daniele.cattaneo &lt;at&gt; polimi.it</code>. </p>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"/>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
